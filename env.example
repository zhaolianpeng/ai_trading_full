# ==============================================================================
# AI Trading System - 环境变量配置文件模板
# ==============================================================================
# 说明：
# 1. 复制此文件为 .env: cp env.example .env
# 2. 根据您的需求修改配置
# 3. 填写您的 API Key（OPENAI_API_KEY 或 DEEPSEEK_API_KEY）
# ==============================================================================

# ==============================================================================
# 数据配置
# ==============================================================================

# 数据源类型: 'synthetic'（合成数据）, 'csv'（CSV文件）, 'yahoo'（Yahoo Finance）, 'binance'（Binance）
# 推荐使用 'binance' 获取加密货币数据，或 'yahoo' 获取股票/加密货币数据
DATA_SOURCE=binance

# CSV文件路径（当 DATA_SOURCE='csv' 时使用）
# DATA_PATH=path/to/your/data.csv

# 市场交易对（当 DATA_SOURCE='yahoo' 或 'binance' 时使用）
# Yahoo Finance 格式: 'BTC-USD', 'AAPL', 'TSLA' 等
# Binance 格式: 'BTC/USDT', 'ETH/USDT' 等
MARKET_SYMBOL=BTC/USDT

# 数据周期（Yahoo Finance，当 DATA_SOURCE='yahoo' 时使用）
# 选项: '1d', '5d', '1mo', '3mo', '6mo', '1y', '2y', '5y', '10y', 'ytd', 'max'
MARKET_PERIOD=1y

# 数据间隔（Yahoo Finance，当 DATA_SOURCE='yahoo' 时使用）
# 选项: '1m', '5m', '15m', '30m', '1h', '1d', '1wk', '1mo'
MARKET_INTERVAL=1h

# 时间框架（Binance，当 DATA_SOURCE='binance' 时使用）
# 选项: '1m', '3m', '5m', '15m', '30m', '1h', '2h', '4h', '6h', '8h', '12h', '1d', '3d', '1w', '1M'
MARKET_TIMEFRAME=1h

# 最大数据条数（Binance，最大 1000）
MARKET_LIMIT=1000

# 市场类型: 'spot'（现货）或 'future'（永续合约）
# 推荐使用 'future' 获取永续合约数据
MARKET_TYPE=future

# 信号倒推天数（默认7天，即1周）
# 用于多时间周期分析，查询过去N天的数据
SIGNAL_LOOKBACK_DAYS=7

# 合成数据大小（当 DATA_SOURCE='synthetic' 时使用）
SYNTHETIC_DATA_SIZE=1500

# 是否使用高级技术指标（MACD、布林带、随机指标、威廉指标、CCI、ADX等）
USE_ADVANCED_TA=True

# 是否使用 Eric 全面策略指标（Eric Score、Donchian通道、EMA眼、量能爆发、背离检测等）
USE_ERIC_INDICATORS=True

# ==============================================================================
# LLM 配置
# ==============================================================================

# 是否启用 LLM 分析（True/False）
# 如果设置为 False，将使用 fallback 方法（不使用 AI 分析）
USE_LLM=True

# LLM 提供商: 'openai' 或 'deepseek'
# 推荐使用 'deepseek'（更便宜，且支持推理模型）
LLM_PROVIDER=deepseek

# OpenAI API Key（当 LLM_PROVIDER='openai' 时使用）
# 请在此处填写您的 OpenAI API Key
OPENAI_API_KEY=sk-your-openai-api-key

# OpenAI 模型名称
# 选项: 'gpt-4o-mini'（推荐，便宜）, 'gpt-4o', 'gpt-3.5-turbo' 等
OPENAI_MODEL=gpt-4o-mini

# DeepSeek API Key（当 LLM_PROVIDER='deepseek' 时使用）
# 请在此处填写您的 DeepSeek API Key
DEEPSEEK_API_KEY=sk-your-deepseek-api-key

# DeepSeek 模型名称
# 选项: 'deepseek-reasoner'（推荐，推理模型）, 'deepseek-chat' 等
DEEPSEEK_MODEL=deepseek-reasoner

# LLM 温度参数（0-2，默认 0.0）
# 值越高，输出越随机；值越低，输出越确定
OPENAI_TEMPERATURE=0.0

# LLM 最大 token 数（默认 400）
# 如果使用 deepseek-reasoner，建议设置为 800 或更高
OPENAI_MAX_TOKENS=400

# LLM并发处理线程数（可选，不设置则根据提供商自动调整）
# DeepSeek 默认 20，OpenAI 默认 5
# LLM_CONCURRENT_WORKERS=20

# ==============================================================================
# 回测配置
# ==============================================================================

# 最大持仓周期（默认 20）
# 如果持仓超过此周期仍未达到止盈/止损，将强制平仓
BACKTEST_MAX_HOLD=20

# 止损 ATR 倍数（默认 1.0）
# 止损 = 入场价 - ATR × BACKTEST_ATR_STOP_MULT（做多）
# 止损 = 入场价 + ATR × BACKTEST_ATR_STOP_MULT（做空）
BACKTEST_ATR_STOP_MULT=1.0

# 止盈 ATR 倍数（默认 2.0）
# 止盈 = 入场价 + ATR × BACKTEST_ATR_TARGET_MULT（做多）
# 止盈 = 入场价 - ATR × BACKTEST_ATR_TARGET_MULT（做空）
BACKTEST_ATR_TARGET_MULT=2.0

# 部分止盈比例（0-1，默认 0.5，即50%仓位）
# 0 表示不使用部分止盈
# 例如：0.5 表示当价格达到部分止盈价时，平仓50%仓位，剩余50%等待全部止盈
BACKTEST_PARTIAL_TP_RATIO=0.5

# 部分止盈 ATR 倍数（默认 1.0）
# 部分止盈价 = 入场价 ± ATR × BACKTEST_PARTIAL_TP_MULT
BACKTEST_PARTIAL_TP_MULT=1.0

# 回测数据月数（默认 0，表示使用默认 limit）
# 例如：6 表示回测过去6个月的数据
BACKTEST_MONTHS=0

# 是否使用全量数据回测（True/False）
# 如果为 True，将使用所有可用数据进行回测
BACKTEST_FULL_DATA=False

# LLM 评分最低阈值（默认 40）
# 只有 LLM 评分 >= 此值的信号才会被考虑
MIN_LLM_SCORE=40

# 最小质量评分（默认 50）
# 只有质量评分 >= 此值的信号才会被考虑
# 回测模式下会自动降低到 10
MIN_QUALITY_SCORE=50

# 最小确认数量（默认 2）
# 信号需要至少 N 个确认才会被考虑
# 回测模式下会自动降低到 1
MIN_CONFIRMATIONS=2

# 最小盈亏比要求（默认 1.5）
# 系统会自动调整止盈以满足此要求
MIN_RISK_REWARD=1.5

# 最小 ATR 百分比（默认 0.5%，用于过滤低波动）
# ATR 相对于价格的百分比必须 >= 此值
# 回测模式下会自动降低到 0.15%
MIN_ATR_PCT=0.5

# 是否使用信号过滤器（True/False）
USE_SIGNAL_FILTER=True

# ==============================================================================
# 合约交易配置
# ==============================================================================

# 杠杆倍数（默认 10 倍，支持 10-30 倍）
# 杠杆越高，风险越大，止损会自动调整（杠杆越高，止损越小）
# 建议：10-30倍杠杆适合有经验的交易者，新手建议使用5-10倍
FUTURES_LEVERAGE=10

# 每笔交易风险比例（默认 0.02，即2%）
# 每笔交易的风险不能超过总资金的此比例
FUTURES_RISK_PER_TRADE=0.02

# 保证金率（默认 0.01，即1%）
# 例如：100倍杠杆需要1%保证金
FUTURES_MARGIN_RATE=0.01

# 维持保证金率（默认 0.5，即50%）
# 当保证金低于此比例时，可能触发强制平仓
FUTURES_MAINTENANCE_MARGIN_RATE=0.5

# 最小止损百分比（默认 0.005，即0.5%）
# 合约交易的止损不能小于此百分比
FUTURES_MIN_STOP_PCT=0.005

# 最大止损百分比（默认 0.05，即5%）
# 合约交易的止损不能大于此百分比
FUTURES_MAX_STOP_PCT=0.05

# 最大止盈百分比（默认 0.20，即20%）
# 合约交易的止盈不能大于此百分比
FUTURES_MAX_PROFIT_PCT=0.20

# 是否使用增强的合约交易策略（True/False）
FUTURES_USE_ENHANCED_STRATEGY=True

# ==============================================================================
# ML过滤器配置
# ==============================================================================

# ML模型类型: 'random_forest' 或 'logistic_regression'
# RandomForest 通常效果更好，但训练时间更长
ML_MODEL_TYPE=random_forest

# 是否重新训练ML模型（True/False，默认 False）
# 如果为 True，每次运行都会重新训练模型
ML_RETRAIN=False

# ML置信度阈值（0-1，默认 0.6）
# 只有 ML 预测概率 >= 此值的信号才会被考虑
ML_CONFIDENCE_THRESHOLD=0.6

# ==============================================================================
# 风险管理配置
# ==============================================================================

# 最大同时持仓数（默认 5）
# 限制同时持有的仓位数量
MAX_POSITIONS=5

# 每日最大亏损比例（默认 0.05，即5%）
# 当日亏损达到此比例时，自动停止开新仓
MAX_DAILY_LOSS=0.05

# 手续费率（默认 0.0005，即0.05%）
# 每笔交易的手续费 = 交易金额 × FEE_RATE
FEE_RATE=0.0005

# 滑点率（默认 0.0005，即0.05%）
# 考虑买卖滑点，实际成交价格 = 理论价格 × (1 ± SLIPPAGE)
SLIPPAGE=0.0005

# ==============================================================================
# 信号评分配置
# ==============================================================================

# 最小综合得分阈值（默认 60.0）
# 只有综合得分 >= 此值的信号才会被考虑
MIN_COMPOSITE_SCORE=60.0

# ==============================================================================
# 交易模式配置
# ==============================================================================

# 交易模式: 'normal'（标准）, 'scalping'（高频短单）, 'swing'（波段交易）
# - normal: 标准模式，适合大多数场景
# - scalping: 高频短单模式，降低所有阈值，适合小时级及以下
# - swing: 波段交易模式，提高阈值，适合日线级
TRADING_MODE=normal

# ==============================================================================
# 多时间周期配置
# ==============================================================================

# 是否使用多时间周期分析（True/False，默认 True）
# 如果为 True，将综合分析 1小时、4小时、日线级别的信号
USE_MULTI_TIMEFRAME=True

# 多时间周期最小确认数（默认 2）
# 需要至少 N 个时间周期同时确认，信号才会被考虑
MIN_TIMEFRAME_CONFIRMATIONS=2

# ==============================================================================
# 高频交易配置
# ==============================================================================

# 是否启用高频交易策略（True/False，默认 True）
# 基于多时间周期超买/超卖判断，在小周期寻找反向交易机会
USE_HIGH_FREQUENCY=True

# 最小连续超买次数（日线/4小时，默认 3）
# 当日线或4小时线连续 N 根K线处于超买状态时，触发反向做空机会
HF_MIN_CONSECUTIVE_OVERBOUGHT=3

# 最小连续超卖次数（日线/4小时，默认 3）
# 当日线或4小时线连续 N 根K线处于超卖状态时，触发反向做多机会
HF_MIN_CONSECUTIVE_OVERSOLD=3

# 是否允许一天多次交易（True/False，默认 True）
# 如果为 True，允许同一天内多次开仓（如果趋势允许）
ALLOW_MULTIPLE_TRADES_PER_DAY=True

# ==============================================================================
# 日志配置
# ==============================================================================

# 日志级别: 'DEBUG', 'INFO', 'WARNING', 'ERROR'
# DEBUG: 显示所有日志（包括调试信息）
# INFO: 显示一般信息（推荐）
# WARNING: 只显示警告和错误
# ERROR: 只显示错误
LOG_LEVEL=INFO

# 日志文件路径（默认 running/trading.log）
# 如果设置为 None 或空字符串，则不写入文件
# 所有执行结果文件（日志、CSV、JSON、PNG等）统一放在 running 目录下
LOG_FILE=running/trading.log

# ==============================================================================
# 输出配置
# ==============================================================================

# 输出文件目录（默认当前目录 '.'）
# 所有输出文件（signals_log.json, trades.csv, trading_chart.png 等）将保存在此目录
# 默认值：running（所有执行结果文件统一放在此目录）
OUTPUT_DIR=running

# 是否使用缓存数据（默认 True）
# 如果设置为 True，且存在 running/sample_data.csv，则直接使用缓存数据，避免重复获取
# 设置为 False 则每次重新获取数据
USE_CACHED_DATA=True

# ==============================================================================
# 配置说明
# ==============================================================================
# 1. 首次使用：请至少配置以下关键项：
#    - DATA_SOURCE: 数据源类型
#    - MARKET_SYMBOL: 交易对
#    - LLM_PROVIDER: LLM提供商
#    - OPENAI_API_KEY 或 DEEPSEEK_API_KEY: API密钥
#
# 2. 回测模式：设置 BACKTEST_MONTHS=6 可以回测6个月数据
#
# 3. 合约交易：设置 MARKET_TYPE=future 和 FUTURES_LEVERAGE 来启用合约交易
#
# 4. 高频交易：设置 USE_HIGH_FREQUENCY=True 来启用高频交易策略
#
# 5. 更多配置说明请查看 README.md
# ==============================================================================
